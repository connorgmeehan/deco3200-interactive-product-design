PVector[][] features = {
  {
    new PVector(172.973, 216.573), 
    new PVector(180.438, 212.994), 
    new PVector(189.012, 213.277), 
    new PVector(196.711, 216.161), 
  }, 
  {
    new PVector(247.247, 217.378), 
    new PVector(255.447, 214.366), 
    new PVector(264.464, 215.362), 
    new PVector(272.456, 219.341), 
  }, 
  {
    new PVector(160.456, 190.877), 
    new PVector(169.024, 183.201), 
    new PVector(179.743, 180.384), 
    new PVector(190.659, 180.993), 
    new PVector(200.803, 184.091), 
  }, 
  {
    new PVector(239.469, 184.125), 
    new PVector(254.244, 181.191), 
    new PVector(269.342, 181.642), 
    new PVector(283.515, 187.349), 
    new PVector(294.273, 198.521), 
  }, 
  {
    new PVector(172.973, 216.573), 
    new PVector(180.438, 212.994), 
    new PVector(189.012, 213.277), 
    new PVector(196.711, 216.161), 
    new PVector(188.864, 218.61), 
    new PVector(180.586, 218.921), 
  }, 
  {
    new PVector(247.247, 217.378), 
    new PVector(255.447, 214.366), 
    new PVector(264.464, 215.362), 
    new PVector(272.456, 219.341), 
    new PVector(264.092, 221.01), 
    new PVector(255.299, 220.306), 
  }, 
  {
    new PVector(148.722, 226.08), 
    new PVector(145.94, 247.269), 
    new PVector(144.959, 268.674), 
    new PVector(145.226, 289.062), 
    new PVector(148.168, 308.349), 
    new PVector(156.501, 325.313), 
    new PVector(171.138, 338.341), 
    new PVector(189.429, 347.332), 
    new PVector(209.997, 350.262), 
  }, 
  {
    new PVector(209.997, 350.262), 
    new PVector(235.006, 351.803), 
    new PVector(259.716, 348.29), 
    new PVector(282.818, 340.176), 
    new PVector(300.841, 325.679), 
    new PVector(310.976, 305.173), 
    new PVector(316.669, 281.271), 
    new PVector(319.88, 255.894), 
    new PVector(322.124, 230.515), 
  }, 
  {
    new PVector(148.722, 226.08), 
    new PVector(145.94, 247.269), 
    new PVector(144.959, 268.674), 
    new PVector(145.226, 289.062), 
    new PVector(148.168, 308.349), 
    new PVector(156.501, 325.313), 
    new PVector(171.138, 338.341), 
    new PVector(189.429, 347.332), 
    new PVector(209.997, 350.262), 
    new PVector(235.006, 351.803), 
    new PVector(259.716, 348.29), 
    new PVector(282.818, 340.176), 
    new PVector(300.841, 325.679), 
    new PVector(310.976, 305.173), 
    new PVector(316.669, 281.271), 
    new PVector(319.88, 255.894), 
    new PVector(322.124, 230.515), 
  }, 
  {
    new PVector(185.785, 294.669), 
    new PVector(193.352, 286.588), 
    new PVector(202.278, 280.625), 
    new PVector(212.08, 281.312), 
    new PVector(224.065, 281.449), 
    new PVector(234.939, 288.39), 
    new PVector(245.342, 296.589), 
    new PVector(234.619, 300.676), 
    new PVector(222.964, 302.043), 
    new PVector(211.362, 301.549), 
    new PVector(201.865, 301.498), 
    new PVector(192.905, 299.556), 
  }, 
  {
    new PVector(185.785, 294.669), 
    new PVector(201.857, 290.901), 
    new PVector(211.8, 290.136), 
    new PVector(224.331, 291.473), 
    new PVector(245.342, 296.589), 
    new PVector(224.181, 292.023), 
    new PVector(211.744, 290.61), 
    new PVector(201.855, 291.354), 
  }, 
  {
    new PVector(216.372, 208.94), 
    new PVector(214.538, 219.339), 
    new PVector(212.642, 229.554), 
    new PVector(210.739, 239.685), 
  }, 
  {
    new PVector(200.68, 258.08), 
    new PVector(206.032, 259.167), 
    new PVector(211.576, 259.429), 
    new PVector(219.248, 259.587), 
    new PVector(226.865, 258.964), 
  }, 
  {
    new PVector(160.456, 190.877), 
    new PVector(169.024, 183.201), 
    new PVector(179.743, 180.384), 
    new PVector(190.659, 180.993), 
    new PVector(200.803, 184.091), 
    new PVector(239.469, 184.125), 
    new PVector(254.244, 181.191), 
    new PVector(269.342, 181.642), 
    new PVector(283.515, 187.349), 
    new PVector(294.273, 198.521), 
    new PVector(322.124, 230.515), 
    new PVector(319.88, 255.894), 
    new PVector(316.669, 281.271), 
    new PVector(310.976, 305.173), 
    new PVector(300.841, 325.679), 
    new PVector(282.818, 340.176), 
    new PVector(259.716, 348.29), 
    new PVector(235.006, 351.803), 
    new PVector(209.997, 350.262), 
    new PVector(189.429, 347.332), 
    new PVector(171.138, 338.341), 
    new PVector(156.501, 325.313), 
    new PVector(148.168, 308.349), 
    new PVector(145.226, 289.062), 
    new PVector(144.959, 268.674), 
    new PVector(145.94, 247.269), 
    new PVector(148.722, 226.08), 
  }, 
};
int windowWidth = 1024, windowHeight = 768;
int lastTime;
int total = 0;
int vertToDrawIndex = 0;

float boundingX = 550, boundingY = 150, boundingWidth = 400, boundingHeight = 400;
float blendRectX = 550, blendRectY = 150;
float minY = 768, maxY = 0, minX = 1024, maxX = 0;

void setup() {
  size(1024, 768);
  frameRate(10);
  lastTime = millis();
  //background(102);


  for (int i = 0; i < features.length; i++) {
    for (int j = 0; j < features[i].length; j++) {
      PVector currentVal = features[i][j];
      //currentVal = currentVal.mult(2);
      total++;
      minY = constrain(currentVal.y, 0.0f, minY);
      maxY = constrain(currentVal.y, maxY, (float) windowHeight);
      minX = constrain(currentVal.x, 0.0f, minX);
      maxX = constrain(currentVal.x, maxX, (float) windowWidth);
    }
  }

  for (int i = 0; i < features.length; i++) {
    for (int j = 0; j < features[i].length; j++) {
      PVector currentVal = features[i][j];
      float newX = map(currentVal.x, minX, maxX, 600, 900);
      float newY = map(currentVal.y, minY, maxY, 200, 500);
      features[i][j] = new PVector(newX, newY);
    }
  }

  print(minX, maxX, minY, maxY);
}

void draw() {
  background(0);

  vertToDrawIndex++;

    if (vertToDrawIndex > total) {
      vertToDrawIndex = 0;
    }

  int totalIndex = 0;

  noFill();
  stroke(125);
  //rect(minX, minY, maxX-minX, maxY-minY);
  strokeWeight(2);
  rect(boundingX, boundingY, boundingWidth, boundingHeight);
  strokeWeight(3);
  stroke(0);

  //line(683, 150, 816, 150);
  line(boundingX + (boundingWidth/5), boundingY, boundingX + (boundingWidth/5*4), boundingY);
  line(boundingX + (boundingWidth/5), boundingY+boundingHeight, boundingX + (boundingWidth/5*4), boundingY+boundingHeight);
  line(boundingX, boundingY + (boundingHeight/5), boundingX, boundingY + (boundingHeight/5*4));
  line(boundingX + boundingWidth, boundingY + (boundingHeight/5), boundingX + boundingWidth, boundingY + (boundingHeight/5*4));





  noStroke();
  strokeWeight(1);
  for (int i = 0; i < features.length-1; i++) {
    //text("["+i+"]", features[i][0].x + i * 5, features[i][0].y - 20);
    for (int j = 0; j < features[i].length-1; j+=1) {
      PVector currentVal = features[i][j];
      PVector nextVert = features[i][j+1];

      totalIndex++;

      noStroke();
      noFill();

      if (totalIndex == vertToDrawIndex) {
        text("" + currentVal + "", 750, 100);
      }

      if (totalIndex < vertToDrawIndex) {
        fill(255);
        ellipse(currentVal.x, currentVal.y, 7, 7);
        stroke(255);
        line(currentVal.x, currentVal.y, nextVert.x, nextVert.y);
        if (j == features[i].length-2) {
          ellipse(nextVert.x, nextVert.y, 7, 7);
          if ( i == 4 || i == 9 || i == 10 || i == 5) {
            line(nextVert.x, nextVert.y, features[i][0].x, features[i][0].y);
          }
        }
          
          
         
    
    }
      
       blendMode(DARKEST);
          fill(#0029F3);
          noStroke();
          rect(blendRectX+1, blendRectY+1, boundingWidth-3, boundingHeight/10);
          blendRectY = blendRectY + 0.2;
          blendMode(NORMAL);
          //println(boundingHeight);
          
          if (blendRectY >= 483) {
            //if ((int) blendRectY >= ((int) blendRectY + (int) boundingHeight)) {
              blendRectY = 150;
            }  

      //stroke(#0029F3);
      //line(currentVal.x, currentVal.y, nextVert.x, nextVert.y);
      //text("["+currentVal.x+","+currentVal.y+"]", currentVal.x, currentVal.y);
      //if (vertToDrawIndex > total) {
      //vertToDrawIndex = 0;
      //if (totalIndex == vertToDrawIndex) {



      //}

      //}
      //}
    }
  }
}
